<?xml version="1.0" encoding="ISO-8859-1"?>
<project basedir="." default="compile" name="Compilation Scripts">

	<property environment="env"/>
	<property name="encoding" value="ISO-8859-1"/>

	<property name="src" location="src"/>

	<!-- Directories for compiled code -->
	<property name="build.home" location="build"/>

	<!-- Directories for deploy -->
	<property name="deploy.home" location="deploy"/>

	<!-- Directories with libraries (JARs) -->
	<property name="lib" location="lib" />

	<!-- Compilation options -->
	<property name="compile.debug" value="on"/>
	<property name="compile.deprecation" value="off"/>
	<property name="compile.optimize" value="on"/>

	<target name="clean-all"
    		description="Removes any generated files">
		<delete dir="${build.home}"/>
		<delete dir="${deploy.home}"/>
	</target>


	<target name="compile" description="Compile java code">
		<mkdir dir="${build.home}"/>
		<javac destdir="${build.home}"
				extdirs="${lib}"
				debug="${compile.debug}"
				optimize="${compile.optimize}"
				deprecation="${compile.deprecation}"
				encoding="${encoding}"
				nowarn="true">
			<src path="${src}"/>
		</javac>
	</target>

	<target name="jar" description="Generates a java archive of compiled java code."
			depends="compile">
		<mkdir dir="${deploy.home}"/>
		<jar destfile="${deploy.home}/fenix-tools.jar">
			<fileset dir="${build.home}">
				<include name="pt/utl/**/*.class"/>
				<include name="com/**/*.class"/>
			</fileset>
		</jar>
		<jar destfile="${deploy.home}/ant-properties-configurator.jar">
			<fileset dir="${build.home}">
				<include name="pt/linkare/**/*.class"/>
			</fileset>
		</jar>
	</target>

	<target name="dwg">
		<java classname="pt.utl.ist.fenix.tools.image.DWGProcessor"
				fork="yes" failonerror="true" maxmemory="1024m" jvmargs="-Dfile.encoding=iso8859-1">
			<arg value="/home/marvin/bp2000/Pavilhao_de_Civil"/>
			<arg value="/tmp/dwg"/>
			<arg value="1250"/>
			<classpath>
				<pathelement path="${build.home}"/>
				<fileset dir="${lib}/">
					<include name="*.jar"/>
				</fileset>
			</classpath>
		</java>
	</target>

</project>
